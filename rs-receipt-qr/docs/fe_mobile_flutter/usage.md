# Инструкции по использованию fe_mobile_flutter

## 1. Сканирование QR кода и импорт счета
- Нажмите кнопку "Scan QR Code" на домашней странице.
- Отсканируйте QR код черногорского чека.
- Приложение выполнит:
  1. Разбор URL QR кода и извлечение параметров `iic`, `crtd` и `tin`.
  2. Получение данных счета с https://mapr.tax.gov.me/ic/api/verifyInvoice используя эти параметры.
  3. Разбор возвращенного JSON в объекты Dart.
  4. Сохранение чека и его позиций в локальную базу данных Drift.
- Сообщения об успехе или ошибках отображаются внизу экрана сканера.

## 2. Синхронизация чеков и покупок с бэкендом
- Нажмите кнопку "Sync Receipts to Backend" на домашней странице.
- Приложение выполнит:
  1. Чтение всех чеков и их позиций покупок из локальной базы данных.
  2. Сериализацию их в JSON.
  3. Отправку на бэкенд сервер Quarkus по адресу `/api/receipts/with-items`.
  4. Отображение индикатора прогресса и сообщений об успехе или ошибках.

## 3. Требования
- Убедитесь, что выполнена команда `flutter pub get` для установки зависимостей.
- Выполните `flutter pub run build_runner build --delete-conflicting-outputs` для генерации кода базы данных Drift.
- При необходимости обновите URL бэкенда в `main.dart` и `sync_service.dart`.

## 4. Примечания
- Приложение использует Drift для локального хранения, HTTP для коммуникации с бэкендом и API счетов, и `qr_code_scanner` для сканирования QR.
- Все данные хранятся локально и могут быть синхронизированы с бэкендом при наличии подключения. 